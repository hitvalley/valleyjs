<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Test for Queue</title>
  <script src="../third/jquery/jquery-2.1.0.min.js"></script>
  <script src="../third/require/require.min.js"></script>
</head>
<body>
<script>
require({
  baseUrl: '../'
});
require([
  'lib/queue'
], function(queue){

var list = [function(){
  console.log('item1')
  return 'item1';
}, function(){
  var deferred = $.Deferred();
  setTimeout(function(){
    console.log('item2');
    deferred.resolve('item2');
  }, 1000);
  return deferred.promise();
}, function(done, fail) {
  console.log('item3');
  return 'item3';
}, function(done, fail){
  var deferred = $.Deferred();
  window.setTimeout(function(){
    console.log('item4');
    deferred.resolve('item4');
  }, 1000);
  return deferred.promise();
}];

queue(list).then(function(data){
  console.log('last result:' + data);
});
/*queue.callbacks([function(){
  console.log('item1')
}, function(callback){
  setTimeout(function(){
    console.log('item2');
    deferred.resolve();
  }, 1000);
  return deferred;
}, function() {
  console.log('item3');
}], function(){
  console.log('finished');
});*/

});
</script>
</body>
</html>
